{% extends "bootstrap5/page.jinja" %}

{% block title %}Documentation Home{% endblock %}

{% block head %}
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
{% endblock %}

{% block content %}
    <div class="container-fluid">
        <h1 class="display-2"><code>{{ data.system }}</code></h1>

        <h1>Getting Started</h1>
        <p>
            The idea of this software is to support client-side faculty websites via a minimal wrapper-structure around a Python-based templating engine (<a href="https://jinja.palletsprojects.com" target="_blank">Jinja</a>).
            There is support for multiple <em>sites</em> via common <em>templates</em> as well as extensibility for developing new templates.
            The goal is to <em>require</em> minimal knowledge beyond standard web technologies (HTML, CSS, JS) and some small amount of Jinja, as well as to support a spectrum of coding style in the space of [(Python/JS) scripted, hand-coded (HTML)].
        </p>

        <h2>Some Terms</h2>
        <p>
            <ul>
                <li>
                    <strong>Template</strong>. A packaging of Jinja template/macro files, static resources (e.g., CSS, JS), and Python code/data to support a particular type of site (e.g., <code>bootstrap5</code> in this case).
                    <ul>
                        <li><strong>Resource</strong>. A file to copy when instantiating a template (e.g., <code>css/bootstrap.min.css</code> for this template).</li>
                        <li><strong>Data</strong>. Arbitrary Python variables used to populate pages (via the Jinja templating engine; e.g., <code>system</code> = <code>{{ data.system }}</code>).</li>
                        <li><strong>Global</strong>. a variable, typically a function, supplied to the Jinja engine that becomes available to all Jinja files (template &amp; site; e.g., 42 in binary = {{ bin(42) }}).</li>
                    </ul>
                </li>
                <li><strong>Site</strong>. A customized instantiation of a template (e.g., <code>docs</code> in this case), including pages (that typically will extend a template's Jinja file; e.g., <code>index.html</code> in this case), site-specific resources (e.g., <code>img/favicon.ico</code> in this case), Python code, and site-specific data.
                    <ul>
                        <li><strong>Build</strong>. Runs the Python code site, template, &amp; core code in order to output a set of pages &amp; resources rendered via Jinja.</li>
                    </ul>
                </li>
            </ul>
        </p>

        <h2>Starting a Site</h2>
        <p>
            Let's assume a good template already exists...
            <ol>
                <li>Create a folder in the <code>sites</code> subpackage that will contain your site-specific pages and resources (think of this as the <em>state</em> of your site; e.g., <code>sites/docs</code> in this case)...
                    <ul>
                        <li>Create at least one page in this folder based upon Jinja files available for your desired template.
                            <ul>
                                <li>The <code>extends</code> path should take the form: <code>TEMPLATE_NAME/FILE.JINJA</code></li>
                            </ul>
                        </li>
                        <li>Structure resources within this folder.</li>
                    </ul>
                </li>
                
                <li>Create a Python file outside all packages (e.g., <code>docs.py</code> in this case) that calls the appropriate template function to <em>build</em> your site; each template will require various inputs, but typically...
                    <ul>
                        <li><strong>site_dir</strong>: the name of the folder in <code>sites</code> you created.
                            <ul>
                                <li>The optional <strong>site_pkg</strong> parameter, if <code>True</code>, indicates the path (absolute or relative) is potentially outside the package.</li>
                            </ul>
                        </li>
                        <li><strong>destination</strong>: the folder in which to build your site (<strong>note: this folder will be deleted prior to each build</strong>).</li>
                        <li><strong>pages</strong>: the list of pages in the site folder to render using Jinja.</li>
                        <li><strong>resources</strong>: the list of resources in the site folder to render using Jinja.</li>
                        <li><strong>data</strong>: site-specific data to make available to site pages.</li>
                        <li><strong>globals</strong>: site-specific globals to make available to site pages.</li>
                    </ul>
                </li>
            </ol>
        </p>

        <h2>Typical Workflow</h2>
        <p>
            Once you have a site structure, your typical process is to...
            <ol>
                <li>Make edits to your external Python file and/or the contents of your site folder.
                    <ul>
                        <li>Note: the <code>webutil</code> import has some common functions for producing markup in Python (that is typically then passed as data for inclusion in pages).</li>
                    </ul>
                </li>
                <li>Run your Python file to re-build your site given the changes.</li>
                <li>Open rendered pages (from <strong>site_dir</strong>) in your web browser.</li>
            </ol>

            (rinse and repeat)
        </p>

        <p>
            <ol start="4">
                <li>Upload/sync <strong>site_dir</strong> to a hosting server.</li>
            </ol>
        </p>

        <!-- -->

        <h1>Making a Template</h1>
        <p>
            Much of a template is following convention:
            <ul>
                <li>Create a folder in the <code>templates</code> subpackage, which will contain resources and Jinja files.</li>
                <li>Create a file of the same name in the main package, which will provide functionality to build a site.
                    <ul>
                        <li>The <code>core/site</code> import provides useful functions for this purpose, particularly <code>build</code>.</li>
                    </ul>
                </li>
            </ul>
        </p>

        <p>
            You don't <em>have</em> to store custom templates or sites within the package.
            In addition to the <code>site_pkg</code> parameter discussed above, the optional <code>templ_dir</code> parameter builds a site using a (relative or absolute) path to a directory containing template files.
        </p>

        <p>
            See the included templates for examples.
            Jinja also has great <a href="https://jinja.palletsprojects.com/en/3.0.x/templates/" target="_blank">documentation for template designers</a>.
        </p>
    </div>  
{% endblock %}
